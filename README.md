# note XML to md for NotebookLM - 内部モジュール説明
![Python](https://img.shields.io/badge/python-3.9%2B-blue)

このドキュメントは、NoteからダウンロードされたXML形式の履歴データを、NotebookLM 向けのMarkdown形式に変換・整形・分割する処理を担う、主要な内部モジュールである `xml_to_markdown_converter.py` および `split_markdown_file.py` の機能について説明します。

## モジュール概要

### 1. xml_to_markdown_converter.py
このモジュールは、NoteからダウンロードしたXML形式の履歴データをMarkdown形式に変換する機能を提供します。

#### 主要機能:
- **XMLデータの読み込み**: Noteからダウンロードされた指定のXMLファイルを読み込み、解析します。
- **HTMLからMarkdownへの変換**: XML内のHTMLコンテンツを抽出し、Markdown形式に変換します。この際、HTMLタグの除去、ヘッダー、リスト、太字などのMarkdown形式への変換を行います。
- **テキストコンテンツの抽出**: XMLエントリから投稿日時、タイトル、本文などの情報を抽出し、Markdownとして整形されたテキストを生成します。
- **多言語対応**: システムの言語設定に基づき、エラーメッセージや表示メッセージを多言語で提供します。
- **ファイル選択ダイアログ**: GUIを通じてXMLファイルを簡単に選択できる機能を提供します。

### 2. split_markdown_file.py
このモジュールは、`xml_to_markdown_converter.py`によって生成されたMarkdownコンテンツを指定されたファイルサイズに基づいて複数のファイルに分割し、保存する機能を提供します。

#### 主要機能:
- **Markdownコンテンツの分割**: 大量のMarkdownテキストを、指定されたバイトサイズ上限に基づき複数のファイルに分割します。
- **ファイルの追記/新規作成**: 既存のファイルに追記するか、新しいファイルを連番で作成するかを自動的に判断します。
- **処理履歴の管理**: 最後に処理したエントリのタイムスタンプを`last_entry_time.txt`に記録し、差分更新を可能にします。
- **多言語対応**: システムの言語設定に基づき、エラーメッセージや表示メッセージを多言語で提供します。

## 依存関係
外部依存はありません（Python標準ライブラリのみで動作します）

## 必要条件
- Python 3.9 以上

## ライセンス
ライセンスについては本リポジトリの LICENSE ファイルをご参照ください。
